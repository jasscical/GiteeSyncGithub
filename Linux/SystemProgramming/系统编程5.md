# 系统编程5

## 三、终端

### 1.终端

#### 1.1.终端启动

![image-20210520215410289](系统编程5.assets/image-20210520215410289.png)

![image-20210520215748631](系统编程5.assets/image-20210520215748631.png)

#### 1.2.ttyname

![image-20210520215839102](系统编程5.assets/image-20210520215839102.png)



#### 1.3.网络终端

通过网络进行数据传输，比如ssh远程登录，按键每一个命令都是通过网络传到远程服务器，然后将结果通过网络返回到本地

![image-20210520220040948](系统编程5.assets/image-20210520220040948.png)

### 2.进程组

![image-20210520220331416](系统编程5.assets/image-20210520220331416.png)

进程组操作函数

![image-20210520220514022](系统编程5.assets/image-20210520220514022.png)

![image-20210520220704166](系统编程5.assets/image-20210520220704166.png)

### 3.会话

#### 3.1.创建会话

![image-20210520220934762](系统编程5.assets/image-20210520220934762.png)

#### 3.2.getsid函数

![image-20210520221115641](系统编程5.assets/image-20210520221115641.png)



#### 3.3.setsid函数

![image-20210520221203171](系统编程5.assets/image-20210520221203171.png)



### 4.守护进程

![image-20210520221406619](系统编程5.assets/image-20210520221406619.png)

#### 创建守护进程模型

![image-20210520221644419](系统编程5.assets/image-20210520221644419-1621520205975.png)

![image-20210520221756747](系统编程5.assets/image-20210520221756747.png)

简化步骤如下：

1. 创建子进程 fork
2. 子进程创建新会话 setsid()
3. 改变进程的工作目录 chdir()
4. 指定文件掩码 umask()
5. 将 0/1/2 重定向 /dev/null    dup2()
6. 守护进程主逻辑
7. 退出