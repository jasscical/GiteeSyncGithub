# 操作系统高频面试题

### 1、进程、线程

进程：

- 进程是系统分配资源的最小单位，线程是调度的最小单元。
- 一个可执行程序运行会产生一个或多个进程，进程是运行的可执行程序。一个进程可以有多个线程，但是只有一个主线程，多线程共享进程的内存空间。
- 多个线程在某个时刻只能有一个线程占有资源，线程之间通过竞争，获取资源。
- 线程之间共享内存，线程的切换所需要的开销很小，而进程之间的上下文切换会花费较大的开销。

### 2、调度算法

- **先来先服务**：`非抢占式`使用资源。即对于进程，放到有个队列中，按照队列顺序进行调度
  - 特点：对于长作业有优势，但如果一个长作业先占用资源，而后面到来很多短作业，会造成短作业等待时间过长。
- **短作业优先**：`非抢占式`，即短作业具有的更高的优先级。但是假如有过多的短作业，那么长作业会因此一直处于等待状态，得不到调度
- **最短剩余时间优先**：`抢占式`，每次来一个请求作业时，跟当前正在运行的作业的剩余时间相比，两者选择剩余时间较少的进行调度。
- **时间片轮转法**：将进程按照先来先服务，放到一个就绪队列中。给每一个进程分配一个相同的时间片，从队首取一个进程使用进程，每个进程运行完时间片规定的时间就释放占用的资源，同时放置到队尾，等待下一次调度，唤醒队首调用资源。
  - 效率跟时间片大小很有关系：时间片太小的话，会造成频繁的进程切换，即上下文切换，每次切换进程要保留相关信息，会耗费不少时间。时间片太大的话，又不利于实时性。
- **优先级调度**：给每一个进程设置一个优先级，按照优先级来进行调度。随着进程等待时间加长，优先级也相应增加， 可以防止优先级低的进程永远得不到调度。
- **多级反馈队列**：时间片+优先级调度的结合。
  - 假如有一个进程A需要100个时间片才能执行完，那么需要切换进程100次。假如又希望这个进程能够尽早地完成执行，在是时间片轮转法调度中，是放在一个队列中的，如果队列中还有很多其他进程，那么进程A执行完需要很长时间。
  - 那么怎样让它尽早完成执行？就需要设置优先级了。多级反馈队列就是由多个队列组成，优先级**由高到低**，每个队列的时间片也不相同。
  - 当第一个队列中的进程时间片用完还没执行完的，就会放在第二个队列的末尾（也可以按照优先级放置在其他位置），当第一个队列全部执行完，才可以执行第二个队列，第二、第三队列以此类推。

### 3、linux进程间通信的方式？

- 管道：半双工通信，数据是单向流动的。也就是只能一端发出，一端接收。如果需要互相通信，需要建立两个管道。
  - 匿名管道：内存文件，只存在于内存缓存中。用于有血缘关系的进程之间的通信。比如父子进程之间，linux系统中shell是大部分命令的父进程
  - 有名管道：FIFO文件，借助文件系统，用于非血缘关系之间的进程通信。
- 共享内存：映射一段内存，能够供一些进程共同访问的。由一个进程创建，但可以供多个进程访问。
  - 共享内存是进程间通信（IPC）速度最快的。因为所有进程共享这块内存。想象一下，假如你跟几个小伙伴（多个进程）围在一个黑板（共享内存）前面，那么当一个小伙伴在黑板上写什么，其他人是不是立马就知道了？
  - 往往配合信号量来实现进程间同步与通信
- 套接字：可以在不同主机上（比如中国主机，美国主机）的两个进程通信，当然本地的两个进程通信也是可以的。
- 信号：进程收到某个信号会进行相应的处理，比如中断，or挂起，or挂起。比如输入`ctrl + c`，产生`kill -9`信号，终止当前进程 
- 信号量：是一个计数器。可以控制多个进程对共享资源的访问。可以作为一种锁机制，实现进程、线程对临界区的同步以及互斥访问。 

### 4、系统中快表为什么加快了查询速度？

CPU先给出逻辑地址，然后计算出页号、页内偏移量。

先去快表查询，查不到再去内存的页表中查询。

查询过程：

- 在快表中查询是否存在该页号，如果存在，说明内存中存在对应的数据。通过页号取出该页对应的内存块+页内偏移量**拼接成**对应的物理地址，然后在内存中找到物理地址对应的内存单元即可。如果快表命中，只需要从内存中访问一次即可。
- 如果快表中不存在该页号，也就是没有命中。那么需要`访问`内存中的页表，找到对应的页表项，得到对应的内存块号，再通过取页号对应的内存块+页内偏移**拼接成**物理地址，最后，`访问`物理地址对应的内存单元。如果快表没有命中，则需要两次访问内存。

